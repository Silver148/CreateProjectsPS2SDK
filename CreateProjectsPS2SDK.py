import tkinter as tk
from tkinter import messagebox
import os

# CREADO POR: SILVERHACKER & GEMINI(XD)
# Este es un programa que sirve para crear el esqueleto de un proyecto de código de PS2SDK
"""
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
.....................................................................................................................................................''.....................................................................................................................................................
....................................................................................................................................................'cc'....................................................................................................................................................
....................................................................................................................................................:kx:....................................................................................................................................................
...................................................................................................................................................'dKKd....................................................................................................................................................
...................................................................................................................................................cOKK0c...................................................................................................................................................
..................................................................................................................................................;kKKKKk;..................................................................................................................................................
.................................................................................................................................................,d000KKKx,.................................................................................................................................................
................................................................................................................................................,dO00000KKx,................................................................................................................................................
...............................................................................................................................................,okOOO0000KKx;...............................................................................................................................................
..............................................................................................................................................;dkkkOO00000KKOc..............................................................................................................................................
............................................................................................................................................'cdxkkkOOO000000K0d,............................................................................................................................................
...........................................................................................................................................;odxxkkkkOOOOO0000K0kl'..........................................................................................................................................
.........................................................................................................................................;ldxxxxkkkkkOOOOOO000000xc'........................................................................................................................................
......................................................................................................................................':odxxxxxxkkkkkkOOOOOOOO0000Oxl,......................................................................................................................................
...................................................................................................................................';ldxxxxxxxxxxkkkkkkkkkkOOOOOOOOOOko:'...................................................................................................................................
................................................................................................................................,:ldxxxxxxxxxxxxxxxkkkkkkkkkkkkkkkkkkOOkxo:,................................................................................................................................
...........................................................................................................................';:ldxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxkkkkkkxdl:,'...........................................................................................................................
...................................................................................................................',;:clodkkkkkxxxxxxxxxxxxxxxxxxxxxxxxxxxddddddddddxxxxxxxxxxxdolc:;,,'...................................................................................................................
...................................................................................................................',;:cloxkkkkkxxxxxxxxxxxxxxddddddddddddddddddoddddddddddddddddolc:;,,'...................................................................................................................
...........................................................................................................................';:ldxxxxxxdddddddddddddddoooooooooooooooooooooool:;,............................................................................................................................
................................................................................................................................,:lddxdddddddddddoooooooolllllllllllllllc:,'................................................................................................................................
...................................................................................................................................';coddddddddooooollllllllllcccccccc;,....................................................................................................................................
......................................................................................................................................':lddddooooollllllccccccccccc:,.......................................................................................................................................
.........................................................................................................................................;loooooollllccccccccccc:;'.........................................................................................................................................
...........................................................................................................................................;looolllccccccc:::::;'...........................................................................................................................................
.............................................................................................................................................:llllcccccc::::::,.............................................................................................................................................
..............................................................................................................................................,cllccccc:::::;'..............................................................................................................................................
...............................................................................................................................................':ccccc:::::,................................................................................................................................................
.................................................................................................................................................:ccc:::::,.................................................................................................................................................
..................................................................................................................................................;cc::::,..................................................................................................................................................
...................................................................................................................................................:ccc:;...................................................................................................................................................
...................................................................................................................................................':c::'...................................................................................................................................................
....................................................................................................................................................;c:,....................................................................................................................................................
....................................................................................................................................................';;'....................................................................................................................................................
.....................................................................................................................................................,,.....................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
"""

def create_project_files(project_name, window):
    """Crea el archivo .c y el Makefile."""
    if not project_name:
        messagebox.showerror("Error", "Por favor, ingresa un nombre para el proyecto.")
        return

    c_file_content = f"""// {project_name}.c Generated by CreateProjectsPS2SDK
#include <stdio.h>
#include <kernel.h>

int main() {{
    printf("Hola desde {project_name}!\\n");
    return 0;
}}
"""

    makefile_content = f"""#Makefile generated by CreateProjectsPS2SDK
EE_BIN = {project_name}.elf
EE_OBJS = {project_name}.o
EE_LIBS = -lkernel
EE_CFLAGS = -Wall -O2

all:$(EE_BIN)

clean:
	rm -f $(EE_BIN) $(EE_OBJS)

run:
	ps2client execee host:$(EE_BIN)	

include $(PS2SDK)/samples/Makefile.pref	
include $(PS2SDK)/samples/Makefile.eeglobal
"""

    try:
        # Crear un directorio para los nuevos archivos del proyecto
        if not os.path.exists(project_name):
            os.makedirs(project_name)
        
        # Cambiar al nuevo directorio para crear archivos allí
        original_cwd = os.getcwd() # Guardar el directorio actual
        os.chdir(project_name)

        with open(f"{project_name}.c", "w") as f:
            f.write(c_file_content)
        with open("Makefile", "w") as f:
            f.write(makefile_content)
        
        # Volver al directorio original
        os.chdir(original_cwd) 
        
        messagebox.showinfo("Éxito", f"Proyecto '{project_name}' creado con éxito en el directorio '{project_name}'.")
        
        # CERRAR LA VENTANA AQUÍ
        window.destroy() 

    except IOError as e:
        # Volver antes de mostrar el error si la creación del directorio falló
        if os.getcwd().endswith(project_name) and os.getcwd() != original_cwd:
            os.chdir(original_cwd)
        messagebox.showerror("Error de E/S", f"No se pudieron crear los archivos: {e}")
    except Exception as e:
        if os.getcwd().endswith(project_name) and os.getcwd() != original_cwd:
            os.chdir(original_cwd)
        messagebox.showerror("Error inesperado", f"Ocurrió un error: {e}")

def create_gui():
    """Configura y lanza la interfaz gráfica."""
    window = tk.Tk()
    window.title("CreateProjectsPS2SDK") # Título de la ventana
    window.geometry("300x150") # Tamaño de la ventana

    # Etiqueta y campo de entrada para el nombre del proyecto
    name_label = tk.Label(window, text="Nombre del Proyecto:")
    name_label.pack(pady=10)

    project_name_entry = tk.Entry(window, width=30)
    project_name_entry.pack(pady=5)

    # Botón para crear el proyecto
    # Pasamos 'window' a la función create_project_files
    create_button = tk.Button(window, text="Nuevo Proyecto",
                              command=lambda: create_project_files(project_name_entry.get(), window))
    create_button.pack(pady=10)

    window.mainloop()

if __name__ == "__main__":
    create_gui()
